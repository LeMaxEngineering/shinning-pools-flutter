# Shinning Pools - Manual de Usuario (Español)

"El objetivo de esta aplicación es enfocarse en el 'Mantenimiento', asegurando que cumpla su valor principal: hacer el mantenimiento de piscinas fácil, rastreable y profesional tanto para empresas como para empleados."

# Shinning Pools - Manuales de Usuario

¡Bienvenido! Por favor, selecciona tu idioma preferido para el manual de usuario:

- [Manual de Usuario en Inglés](user_manuals_en.md)
- [Manual de Usuario en Español](user_manuals_es.md)

> **Nota:** Ambos manuales se mantienen actualizados con las últimas funciones e información de solución de problemas. Si notas información desactualizada, por favor contacta al equipo de soporte.

## Tabla de Contenidos

1. [Primeros Pasos](#primeros-pasos)
2. [Manual de Usuario Root](#manual-de-usuario-root)
3. [Manual de Usuario Administrador](#manual-de-usuario-administrador)
4. [Manual de Usuario Cliente](#manual-de-usuario-cliente)
5. [Manual de Usuario Asociado](#manual-de-usuario-asociado)
6. [Solución de Problemas](#solución-de-problemas)

---

## Primeros Pasos

### Configuración Inicial

1. **Acceso a la Aplicación**
   - Abre tu navegador web y navega a la aplicación Shinning Pools
   - La aplicación está optimizada para Chrome, Firefox y Safari

2. **Creación de Cuenta**
   - Haz clic en "Registrarse" en la pantalla de inicio de sesión
   - Ingresa tu correo electrónico y crea una contraseña segura
   - Completa la verificación de correo electrónico (revisa tu bandeja de entrada)
   - Completa tu información de perfil

3. **Asignación de Rol**
   - Los nuevos usuarios comienzan con el rol de "Cliente" por defecto
   - Para ser administrador de empresa, registra tu empresa (ver Manual de Cliente)
   - Los usuarios root son preconfigurados por los administradores del sistema

### Proceso de Inicio de Sesión

1. **Inicio de Sesión Regular**
   - Ingresa tu correo electrónico y contraseña
   - Haz clic en "Iniciar Sesión"
   - Serás redirigido a tu panel según tu rol

2. **Inicio de Sesión con Google**
   - Haz clic en "Iniciar sesión con Google"
   - Autoriza la aplicación
   - Completa el perfil si es tu primer acceso

3. **Recuperación de Contraseña**
   - Haz clic en "¿Olvidaste tu contraseña?" en la pantalla de inicio de sesión
   - Ingresa tu correo electrónico
   - Revisa tu bandeja de entrada para instrucciones de restablecimiento

---

## Manual de Usuario Root

### Descripción General
Los usuarios root tienen acceso completo al sistema y gestionan toda la plataforma, incluyendo la aprobación de empresas, gestión de usuarios y configuración del sistema.

### Funciones del Panel

#### **Gestión de Empresas**
- **Ver Todas las Empresas**: Accede a la lista completa de empresas registradas
- **Estadísticas de Empresas**: Ve el resumen de empresas pendientes, aprobadas y suspendidas
- **Buscar y Filtrar**: Encuentra empresas por nombre, correo o estado

#### **Acciones sobre Empresas**
1. **Aprobar Empresa**
   - Ve a la lista de empresas
   - Encuentra la empresa pendiente
   - Haz clic en "Aprobar"
   - El propietario se convierte automáticamente en Administrador

2. **Editar Detalles de la Empresa**
   - Haz clic en el menú de tres puntos (⋮) junto a una empresa
   - Selecciona "Editar"
   - Modifica la información de la empresa
   - Guarda los cambios

3. **Suspender/Reactivar Empresa**
   - Usa el menú de acciones para suspender empresas activas
   - Proporciona el motivo de suspensión cuando se solicite
   - Reactiva empresas suspendidas según sea necesario

4. **Eliminar Empresa**
   - Usa el menú de acciones para eliminar empresas
   - Confirma la eliminación (esta acción no se puede deshacer)
   - Los usuarios asociados vuelven al rol de Cliente

#### **Gestión de Usuarios**
- **Ver Todos los Usuarios**: Accede al directorio completo de usuarios
- **Gestión de Roles**: Cambia los roles de usuario según sea necesario
- **Gestión de Perfiles**: Edita perfiles y permisos de usuarios

#### **Configuración del Sistema**
- **Planes de Facturación**: Crea y gestiona planes de facturación
- **Tipos de Mantenimiento**: Configura categorías de mantenimiento
- **Configuraciones del Sistema**: Administra configuraciones globales

### Mejores Prácticas
- Revisa registros de empresas puntualmente
- Mantén comunicación clara con los propietarios de empresas
- Documenta todas las acciones administrativas
- Monitorea y da mantenimiento regular al sistema

---

## Manual de Usuario Administrador

### Descripción General
Los administradores gestionan las operaciones de su empresa, incluyendo clientes, asignación de piscinas y coordinación de equipo.

### Funciones del Panel

#### **Resumen de la Empresa**
- **Estadísticas de la Empresa**: Visualiza métricas clave e indicadores de desempeño
- **Actividad Reciente**: Monitorea operaciones y actualizaciones recientes
- **Accesos Rápidos**: Accede a funciones frecuentes

#### **Gestión de Clientes**
1. **Agregar Nuevo Cliente**
   - Ve a la sección de Clientes
   - Haz clic en "Agregar Cliente"
   - Completa la información del cliente:
     - **Foto del Cliente**: Sube una foto de perfil (opcional)
     - **Nombre**: Nombre completo (requerido)
     - **Correo**: Correo de contacto (opcional, recomendado)
     - **Teléfono**: Número principal (requerido)
     - **Dirección**: Dirección del cliente (requerido)
     - **Tipo de Servicio**: Estándar o Premium
     - **Estado**: Activo o Inactivo
   - Guarda el perfil del cliente

2. **Gestión de la Lista de Clientes**
   - Visualiza todos los clientes de la empresa
   - Busca y filtra clientes
   - Edita información de clientes
   - Gestiona la asignación de piscinas

#### **Gestión de Piscinas**
1. **Agregar Nueva Piscina**
   - Ve a la sección de Piscinas
   - Haz clic en "Agregar Piscina"
   - Ingresa los detalles de la piscina (tamaño, tipo, ubicación)
   - Asigna a un cliente

2. **Monitoreo de Piscinas**
   - Visualiza todas las piscinas de la empresa
   - Rastrea el estado y el historial de mantenimiento
   - Programa tareas de mantenimiento
   - Genera reportes de piscina

#### **Guía de Ingreso de Dimensiones de Piscina**

Esta sección detalla cómo funciona el sistema de dimensiones de piscina y brinda orientación para un ingreso óptimo de datos.

**📏 Entendiendo las Dimensiones de la Piscina**

El campo de tamaño acepta texto flexible pero procesa y almacena valores numéricos inteligentemente. Este enfoque híbrido brinda máxima comodidad y precisión.

**✍️ Métodos de Ingreso**

Puedes ingresar dimensiones en varios formatos:

| Formato de Entrada | Ejemplo | Qué Sucede | Resultado Final |
|--------------------|---------|------------|----------------|
| **Número Simple** | `40` | Parseo directo | `40.0 m²` |
| **Número Decimal** | `25.5` | Parseo directo | `25.5 m²` |
| **Dimensiones (Ancho x Alto)** | `25x15` | **Calcula área** | `375.0 m²` |
| **Dimensiones con Unidades** | `30m x 20m` | Extrae primer número | `30.0 m²` |
| **Formato Mixto** | `50.5m` | Extrae número | `50.5 m²` |

**🔄 Flujo de Procesamiento**

```
Entrada del Usuario (String) → Parseo Inteligente → Almacenamiento en BD (Número) → Visualización (Formateado)

Ejemplos:
"40"      → Parseo directo      → 40.0    → "40.0 m²"
"25x15"   → Calcula área        → 375.0   → "375.0 m²"
"30m x 20m" → Extrae número     → 30.0    → "30.0 m²"
```

**🎯 Funciones Inteligentes**

- **Cálculo Automático de Área**: Si ingresas dimensiones como `40x30`, el sistema calcula automáticamente el área (1,200 m²)
- **Tolerancia de Unidades**: Ignora unidades como 'm', 'ft', etc., y extrae los valores numéricos
- **Soporte Decimal**: Se aceptan números enteros y decimales (ej: `25.5`)
- **Protección de Errores**: Entradas inválidas se guardan como `0.0` de forma segura

**💡 Mejores Prácticas**

1. **Piscinas Cuadradas/Rectangulares**: Usa formato `Largo x Ancho` (ej: `25x15`)
2. **Piscinas Circulares**: Ingresa el área directamente (ej: `450`)
3. **Piscinas Irregulares**: Ingresa el área total (ej: `320.5`)
4. **Incluye Decimales**: Para mayor precisión (ej: `25.75x12.5`)

**⚠️ Notas Importantes**

- El sistema almacena el valor calculado como número en la base de datos
- Al editar piscinas, se muestra el número almacenado
- Para formato de dimensiones (`LxA`), el sistema calcula y almacena el área total
- Todas las medidas se muestran con unidades `m²` en la interfaz

**🔧 Detalles Técnicos**

El sistema de parseo sigue esta prioridad:
1. **Número Directo**: Si la entrada es un número válido, se usa directamente
2. **Cálculo de Dimensiones**: Si el formato contiene 'x', calcula ancho × alto
3. **Extracción de Número**: Extrae el primer número válido de formatos mixtos
4. **Fallback**: Por defecto, retorna 0.0 para entradas inválidas

**📊 Flujo Visual de Procesamiento**

```
┌─────────────────────────────────────────────────────────────┐
│                Ejemplos de Entrada del Usuario              │
│  • "40" (número simple)                                   │
│  • "25x15" (dimensiones)                                  │
│  • "30m x 20m" (con unidades)                             │
│  • "50.5" (decimal)                                       │
└─────────────────────┬───────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────┐
│                Método _parseSize()                         │
│                                                           │
│  Paso 1: Intentar parseo directo                          │
│          ↓ (si falla)                                     │
│  Paso 2: Buscar formato 'x' → Calcular área               │
│          ↓ (si falla)                                     │
│  Paso 3: Extraer primer número con regex                  │
│          ↓ (si falla)                                     │
│  Paso 4: Retornar 0.0 (fallback)                          │
└─────────────────────┬───────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────┐
│                Almacenamiento en BD                        │
│            Valor double (ej: 375.0)                        │
└─────────────────────┬───────────────────────────────────────┘
                      │
                      ▼
┌─────────────────────────────────────────────────────────────┐
│                   Visualización en UI                      │
│               "375.0 m²" (formateado)                      │
└─────────────────────────────────────────────────────────────┘
```

Esto asegura máxima flexibilidad y consistencia de datos en tu sistema de gestión de piscinas.

#### **Gestión de Equipo**
1. **Agregar Usuarios Asociados**
   - Ve a la sección de Usuarios
   - Haz clic en "Agregar Asociado"
   - Crea cuentas para trabajadores de campo
   - Asigna permisos apropiados

2. **Asignación de Rutas**
   - Crea rutas de mantenimiento
   - Asigna trabajadores a rutas
   - Monitorea el progreso de rutas
   - Actualiza el estado de la ruta

#### **Reportes y Analítica**
- **Reportes de Mantenimiento**: Genera reportes de servicio
- **Analítica de Desempeño**: Visualiza desempeño de equipo y rutas
- **Reportes de Clientes**: Analiza satisfacción de clientes
- **Reportes Financieros**: Rastrea facturación e ingresos

### Mejores Prácticas
- Comunicación regular con clientes
- Programación proactiva de mantenimientos
- Capacitación y supervisión del equipo
- Control de calidad y estándares de servicio

#### **Proceso de Invitación y Onboarding de Trabajadores**

Esta sección detalla el proceso paso a paso para invitar a un usuario registrado a ser trabajador de tu empresa.

**A. Administrador: Enviando la Invitación**

1.  **Navega a Invitar Trabajador**: Desde tu Panel de Administrador, ve a "Gestionar Trabajadores" y selecciona "Invitar Trabajador" o "Agregar Trabajador".
2.  **Ingresa el Correo**: En el formulario, ingresa el correo del usuario a invitar.
    *   **Requisito 1**: El usuario debe tener cuenta registrada en Shinning Pools.
    *   **Requisito 2**: El usuario debe tener rol `Cliente`.
    *   **Requisito 3**: El usuario no debe tener piscinas registradas.
3.  **Mensaje Personal (Opcional)**: Puedes agregar un mensaje breve que verá el usuario.
4.  **Enviar Invitación**: Haz clic en "Enviar". El sistema creará una invitación pendiente y el usuario será notificado al iniciar sesión.

**B. Usuario Invitado: Respondiendo a la Invitación**

1.  **Inicio de Sesión y Notificación**: Al iniciar sesión, el usuario verá una notificación de invitación pendiente en su Panel de Cliente.
2.  **Revisar Invitación**: Al hacer clic, verá la empresa que lo invita y el mensaje del admin.
3.  **Aceptar o Rechazar**: Dos opciones:
    *   **Aceptar**: Cambia el rol a `Trabajador` y asocia al usuario a la empresa. Al siguiente inicio de sesión verá el Panel de Trabajador.
    *   **Rechazar**: La invitación se marca como `rechazada` y no hay cambios en la cuenta.

Este proceso asegura que el usuario dé consentimiento explícito para unirse como trabajador, brindando una experiencia segura y transparente.

---

## Manual de Usuario Cliente

### Descripción General
Los clientes monitorean sus piscinas, ven reportes de mantenimiento y gestionan su información de cuenta.

### Funciones del Panel

#### **Resumen de Piscinas**
- **Mis Piscinas**: Visualiza todas tus piscinas registradas
- **Estado de Piscina**: Revisa condiciones actuales
- **Historial de Mantenimiento**: Consulta servicios pasados
- **Próximos Servicios**: Ve mantenimientos programados

#### **Registro de Empresa** (Nuevos Clientes)
1. **Registrar tu Empresa**
   - Haz clic en "Registrar Empresa" en el panel
   - Completa la información:
     - Nombre de la empresa
     - Dirección
     - Teléfono
     - Descripción
   - Envía para aprobación
   - Espera aprobación del usuario root

2. **Estado de Registro**
   - "Pendiente de Aprobación": Tu solicitud está en revisión
   - "Aprobado": Acceso a funciones de admin
   - "Rechazado": Contacta soporte

#### **Recibiendo Invitación de Trabajador**
Si un admin te invita a ser trabajador, verás una notificación en tu panel.
1. **Revisar**: Haz clic para ver detalles de la invitación.
2. **Responder**: Puedes **Aceptar** o **Rechazar**.
   - **Aceptar**: Cambia tu rol a "Trabajador" y accedes a rutas y tareas.
   - **Rechazar**: No hay cambios en tu cuenta.

#### **Gestión de Piscinas**
1. **Agregar Nueva Piscina**
   - Ve a la sección de Piscinas
   - Haz clic en "Agregar Piscina"
   - Ingresa detalles:
     - Nombre/identificador
     - Tamaño y tipo
     - Ubicación
     - Requerimientos especiales
   - Envía para procesamiento

2. **Monitoreo de Piscinas**
   - Consulta historial de mantenimiento
   - Revisa reportes de calidad de agua
   - Monitorea estado de equipos
   - Solicita servicios adicionales

#### **Reportes y Comunicación**
- **Reportes de Servicio**: Consulta reportes detallados
- **Facturación**: Revisa facturas de servicio
- **Comunicación**: Contacta a tu proveedor
- **Feedback**: Califica y comenta el servicio

#### **Gestión de Perfil**
- **Información Personal**: Actualiza datos de contacto
- **Preferencias**: Configura notificaciones
- **Seguridad**: Cambia contraseña y ajustes de seguridad

### Mejores Prácticas
- Mantén actualizada la información de piscinas
- Revisa reportes de mantenimiento regularmente
- Comunica requerimientos especiales a tiempo
- Da feedback para mejorar el servicio

---

## Manual de Usuario Asociado

### Descripción General
Los usuarios asociados (trabajadores de campo) ejecutan rutas de mantenimiento, registran actividades y actualizan el estado de piscinas.

### Funciones del Panel

#### **Gestión de Rutas**
1. **Ver Rutas Asignadas**
   - Consulta rutas diarias
   - Ve detalles y piscinas de la ruta
   - Accede a información de clientes
   - Revisa instrucciones especiales

2. **Ejecución de Ruta**
   - Inicia la ruta al comenzar trabajo
   - Actualiza progreso al completar piscinas
   - Registra problemas o retrasos
   - Marca la ruta como completada

#### **Mantenimiento de Piscinas**
1. **Registro de Servicio**
   - Selecciona piscina de la ruta
   - Registra actividades:
     - Niveles químicos
     - Trabajo en equipos
     - Chequeos de calidad de agua
     - Observaciones generales
   - Agrega fotos si es necesario
   - Envía reporte de servicio

2. **Reporte de Problemas**
   - Reporta problemas de equipos
   - Nota problemas de calidad de agua
   - Señala inquietudes del cliente
   - Solicita acciones de seguimiento

#### **Comunicación**
- **Actualizaciones al Cliente**: Informa finalización de servicio
- **Comunicación de Equipo**: Actualiza supervisores sobre progreso
- **Contactos de Emergencia**: Accede a contactos de emergencia
- **Notas de Servicio**: Deja notas detalladas para el equipo

#### **Funciones Móviles**
- **Modo Offline**: Trabaja sin conexión
- **Captura de Fotos**: Documenta condiciones de piscina
- **GPS**: Registra ubicaciones de servicio
- **Control de Tiempo**: Monitorea duración del servicio

### Mejores Prácticas
- Sigue protocolos de seguridad
- Completa todas las tareas asignadas
- Documenta el trabajo detalladamente
- Comunica problemas de inmediato
- Mantén una apariencia profesional

---

## Solución de Problemas

### Problemas Comunes

#### **Problemas de Inicio de Sesión**
- **Olvidé mi Contraseña**: Usa la función de recuperación
- **Cuenta Bloqueada**: Contacta a tu administrador
- **Correo No Verificado**: Revisa spam para el correo de verificación

#### **Problemas de Registro de Empresa**
- **Registro Pendiente**: Espera aprobación (24-48h)
- **Registro Rechazado**: Contacta soporte
- **No Puedes Registrar**: Usa un correo válido

#### **Problemas de Gestión de Piscinas**
- **Piscina No Aparece**: Verifica si está asignada a tu cuenta
- **No Puedes Editar Piscina**: Verifica permisos
- **Historial de Mantenimiento Falta**: Contacta a tu proveedor
- **Foto de Piscina No Carga en Edición**:
  - **Problema**: Error "No se detectó el formato de imagen" al editar piscinas con fotos
  - **Causa**: Corrupción de datos de imagen en modo desarrollo
  - **Solución**: Corregido en la última versión - las fotos ahora cargan correctamente
  - **Alternativa**: Si persiste, sube una nueva foto (el sistema preserva la calidad)
- **Problemas al Subir Foto de Cliente**:
  - **Archivo Muy Grande**: Las fotos se comprimen automáticamente
  - **Timeout de Subida**: En modo desarrollo, las fotos pueden guardarse como data URLs
  - **Errores CORS**: En desarrollo se usa almacenamiento alternativo
  - **Formatos Soportados**: JPG, PNG hasta tamaños razonables

#### **Problemas Técnicos**
- **Página No Carga**: Borra caché y cookies
- **Rendimiento Lento**: Verifica tu conexión
- **Problemas Móviles**: Usa la versión de escritorio para funcionalidad completa

### Obtener Ayuda

#### **Canales de Soporte**
- **Ayuda en la App**: Usa la sección de ayuda en tu panel
- **Soporte por Correo**: support@shinningpools.com
- **Soporte Telefónico**: Llama en horario laboral
- **Documentación**: Consulta este manual y recursos online

#### **Contactos de Emergencia**
- **Problemas Técnicos**: Equipo de soporte TI
- **Emergencias de Servicio**: Proveedor asignado
- **Preguntas de Facturación**: Departamento de cuentas

### Requisitos del Sistema

#### **Navegador Web**
- Chrome 90+ (Recomendado)
- Firefox 88+
- Safari 14+
- Edge 90+

#### **Dispositivos Móviles**
- iOS 13+ (Safari)
- Android 8+ (Chrome)
- Diseño responsivo para todos los tamaños

#### **Conexión a Internet**
- Mínimo 1 Mbps de descarga
- Conexión estable para funciones en tiempo real
- Modo offline disponible para trabajadores de campo

---

## Referencia Rápida

### Atajos de Teclado
- **Ctrl + S**: Guardar cambios
- **Ctrl + F**: Buscar en la página
- **Ctrl + R**: Refrescar página
- **Esc**: Cerrar diálogos

### Indicadores de Estado
- 🟢 **Activo**: Operación normal
- 🟡 **Pendiente**: Esperando acción
- 🔴 **Suspendido**: Temporalmente deshabilitado
- ⚫ **Inactivo**: No en uso

### Acciones Comunes
- **Editar**: Haz clic en el ícono de lápiz o menú de tres puntos
- **Eliminar**: Usa el ícono de papelera con confirmación
- **Ver Detalles**: Haz clic en el nombre del elemento
- **Exportar**: Usa el ícono de descarga para reportes

---

*Última actualización: Diciembre 2024*
*Versión: 1.1 - Guía de Ingreso de Dimensiones de Piscina añadida*

> **📝 Actualizaciones Recientes**: Se añadió la Guía de Ingreso de Dimensiones de Piscina en el Manual de Administrador, detallando el sistema inteligente de parseo para entradas de tamaño de piscina con ejemplos, mejores prácticas y detalles técnicos de implementación.
