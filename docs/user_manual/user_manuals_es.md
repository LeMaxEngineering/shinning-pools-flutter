# Shinning Pools - Manual de Usuario (Espa√±ol)

"El objetivo de esta aplicaci√≥n es enfocarse en el 'Mantenimiento', asegurando que cumpla su valor principal: hacer el mantenimiento de piscinas f√°cil, rastreable y profesional tanto para empresas como para empleados."

# Shinning Pools - Manuales de Usuario

¬°Bienvenido! Por favor, selecciona tu idioma preferido para el manual de usuario:

- [Manual de Usuario en Ingl√©s](user_manuals_en.md)
- [Manual de Usuario en Espa√±ol](user_manuals_es.md)
- [Manuel d'Utilisateur en Fran√ßais](user_manuals_fr.md)

> **Nota:** Todos los manuales se mantienen actualizados con las √∫ltimas funciones e informaci√≥n de soluci√≥n de problemas. Si notas informaci√≥n desactualizada, por favor contacta al equipo de soporte.

## Tabla de Contenidos

1. [Primeros Pasos](#primeros-pasos)
2. [Manual de Usuario Root](#manual-de-usuario-root)
3. [Manual de Usuario Administrador](#manual-de-usuario-administrador)
4. [Manual de Usuario Cliente](#manual-de-usuario-cliente)
5. [Manual de Usuario Asociado](#manual-de-usuario-asociado)
6. [Soluci√≥n de Problemas](#soluci√≥n-de-problemas)

---

## Primeros Pasos

### Configuraci√≥n Inicial

1. **Acceso a la Aplicaci√≥n**
   - Abre tu navegador web y navega a la aplicaci√≥n Shinning Pools
   - La aplicaci√≥n est√° optimizada para Chrome, Firefox y Safari

2. **Creaci√≥n de Cuenta**
   - Haz clic en "Registrarse" en la pantalla de inicio de sesi√≥n
   - Ingresa tu correo electr√≥nico y crea una contrase√±a segura
   - Completa la verificaci√≥n de correo electr√≥nico (revisa tu bandeja de entrada)
   - Completa tu informaci√≥n de perfil

3. **Asignaci√≥n de Rol**
   - Los nuevos usuarios comienzan con el rol de "Cliente" por defecto
   - Para ser administrador de empresa, registra tu empresa (ver Manual de Cliente)
   - Los usuarios root son preconfigurados por los administradores del sistema

### Proceso de Inicio de Sesi√≥n

1. **Inicio de Sesi√≥n Regular**
   - Ingresa tu correo electr√≥nico y contrase√±a
   - Haz clic en "Iniciar Sesi√≥n"
   - Ser√°s redirigido a tu panel seg√∫n tu rol

2. **Inicio de Sesi√≥n con Google**
   - Haz clic en "Iniciar sesi√≥n con Google"
   - Autoriza la aplicaci√≥n
   - Completa el perfil si es tu primer acceso

3. **Recuperaci√≥n de Contrase√±a**
   - Haz clic en "¬øOlvidaste tu contrase√±a?" en la pantalla de inicio de sesi√≥n
   - Ingresa tu correo electr√≥nico
   - Revisa tu bandeja de entrada para instrucciones de restablecimiento

---

## Manual de Usuario Root

### Descripci√≥n General
Los usuarios root tienen acceso completo al sistema y gestionan toda la plataforma, incluyendo la aprobaci√≥n de empresas, gesti√≥n de usuarios y configuraci√≥n del sistema.

### Funciones del Panel

#### **Gesti√≥n de Empresas**
- **Ver Todas las Empresas**: Accede a la lista completa de empresas registradas
- **Estad√≠sticas de Empresas**: Ve el resumen de empresas pendientes, aprobadas y suspendidas
- **Buscar y Filtrar**: Encuentra empresas por nombre, correo o estado

#### **Acciones sobre Empresas**
1. **Aprobar Empresa**
   - Ve a la lista de empresas
   - Encuentra la empresa pendiente
   - Haz clic en "Aprobar"
   - El propietario se convierte autom√°ticamente en Administrador

2. **Editar Detalles de la Empresa**
   - Haz clic en el men√∫ de tres puntos (‚ãÆ) junto a una empresa
   - Selecciona "Editar"
   - Modifica la informaci√≥n de la empresa
   - Guarda los cambios

3. **Suspender/Reactivar Empresa**
   - Usa el men√∫ de acciones para suspender empresas activas
   - Proporciona el motivo de suspensi√≥n cuando se solicite
   - Reactiva empresas suspendidas seg√∫n sea necesario

4. **Eliminar Empresa**
   - Usa el men√∫ de acciones para eliminar empresas
   - Confirma la eliminaci√≥n (esta acci√≥n no se puede deshacer)
   - Los usuarios asociados vuelven al rol de Cliente

#### **Gesti√≥n de Usuarios**
- **Ver Todos los Usuarios**: Accede al directorio completo de usuarios
- **Gesti√≥n de Roles**: Cambia los roles de usuario seg√∫n sea necesario
- **Gesti√≥n de Perfiles**: Edita perfiles y permisos de usuarios

#### **Configuraci√≥n del Sistema**
- **Planes de Facturaci√≥n**: Crea y gestiona planes de facturaci√≥n
- **Tipos de Mantenimiento**: Configura categor√≠as de mantenimiento
- **Configuraciones del Sistema**: Administra configuraciones globales

### Mejores Pr√°cticas
- Revisa registros de empresas puntualmente
- Mant√©n comunicaci√≥n clara con los propietarios de empresas
- Documenta todas las acciones administrativas
- Monitorea y da mantenimiento regular al sistema

---

## Manual de Usuario Administrador

### Descripci√≥n General
Los administradores gestionan las operaciones de su empresa, incluyendo clientes, asignaci√≥n de piscinas y coordinaci√≥n de equipo.

### Funciones del Panel

#### **Resumen de la Empresa**
- **Estad√≠sticas de la Empresa**: Visualiza m√©tricas clave e indicadores de desempe√±o
- **Actividad Reciente**: Monitorea operaciones y actualizaciones recientes
- **Accesos R√°pidos**: Accede a funciones frecuentes

#### **Gesti√≥n de Clientes**
1. **Agregar Nuevo Cliente**
   - Ve a la secci√≥n de Clientes
   - Haz clic en "Agregar Cliente"
   - Completa la informaci√≥n del cliente:
     - **Foto del Cliente**: Sube una foto de perfil (opcional)
     - **Nombre**: Nombre completo (requerido)
     - **Correo**: Correo de contacto (opcional, recomendado)
     - **Tel√©fono**: N√∫mero principal (requerido)
     - **Direcci√≥n**: Direcci√≥n del cliente (requerido)
     - **Tipo de Servicio**: Est√°ndar o Premium
     - **Estado**: Activo o Inactivo
   - Guarda el perfil del cliente

2. **Gesti√≥n de la Lista de Clientes**
   - Visualiza todos los clientes de la empresa
   - Busca y filtra clientes
   - Edita informaci√≥n de clientes
   - Gestiona la asignaci√≥n de piscinas

#### **Gesti√≥n de Piscinas**
1. **Agregar Nueva Piscina**
   - Ve a la secci√≥n de Piscinas
   - Haz clic en "Agregar Piscina"
   - Ingresa los detalles de la piscina (tama√±o, tipo, ubicaci√≥n)
   - Asigna a un cliente

2. **Monitoreo de Piscinas**
   - Visualiza todas las piscinas de la empresa
   - Rastrea el estado y el historial de mantenimiento
   - Programa tareas de mantenimiento
   - Genera reportes de piscina

#### **Gu√≠a de Ingreso de Dimensiones de Piscina**

Esta secci√≥n detalla c√≥mo funciona el sistema de dimensiones de piscina y brinda orientaci√≥n para un ingreso √≥ptimo de datos.

**üìè Entendiendo las Dimensiones de la Piscina**

El campo de tama√±o acepta texto flexible pero procesa y almacena valores num√©ricos inteligentemente. Este enfoque h√≠brido brinda m√°xima comodidad y precisi√≥n.

**‚úçÔ∏è M√©todos de Ingreso**

Puedes ingresar dimensiones en varios formatos:

| Formato de Entrada | Ejemplo | Qu√© Sucede | Resultado Final |
|--------------------|---------|------------|----------------|
| **N√∫mero Simple** | `40` | Parseo directo | `40.0 m¬≤` |
| **N√∫mero Decimal** | `25.5` | Parseo directo | `25.5 m¬≤` |
| **Dimensiones (Ancho x Alto)** | `25x15` | **Calcula √°rea** | `375.0 m¬≤` |
| **Dimensiones con Unidades** | `30m x 20m` | Extrae primer n√∫mero | `30.0 m¬≤` |
| **Formato Mixto** | `50.5m` | Extrae n√∫mero | `50.5 m¬≤` |

**üîÑ Flujo de Procesamiento**

```
Entrada del Usuario (String) ‚Üí Parseo Inteligente ‚Üí Almacenamiento en BD (N√∫mero) ‚Üí Visualizaci√≥n (Formateado)

Ejemplos:
"40"      ‚Üí Parseo directo      ‚Üí 40.0    ‚Üí "40.0 m¬≤"
"25x15"   ‚Üí Calcula √°rea        ‚Üí 375.0   ‚Üí "375.0 m¬≤"
"30m x 20m" ‚Üí Extrae n√∫mero     ‚Üí 30.0    ‚Üí "30.0 m¬≤"
```

**üéØ Funciones Inteligentes**

- **C√°lculo Autom√°tico de √Årea**: Si ingresas dimensiones como `40x30`, el sistema calcula autom√°ticamente el √°rea (1,200 m¬≤)
- **Tolerancia de Unidades**: Ignora unidades como 'm', 'ft', etc., y extrae los valores num√©ricos
- **Soporte Decimal**: Se aceptan n√∫meros enteros y decimales (ej: `25.5`)
- **Protecci√≥n de Errores**: Entradas inv√°lidas se guardan como `0.0` de forma segura

**üí° Mejores Pr√°cticas**

1. **Piscinas Cuadradas/Rectangulares**: Usa formato `Largo x Ancho` (ej: `25x15`)
2. **Piscinas Circulares**: Ingresa el √°rea directamente (ej: `450`)
3. **Piscinas Irregulares**: Ingresa el √°rea total (ej: `320.5`)
4. **Incluye Decimales**: Para mayor precisi√≥n (ej: `25.75x12.5`)

**‚ö†Ô∏è Notas Importantes**

- El sistema almacena el valor calculado como n√∫mero en la base de datos
- Al editar piscinas, se muestra el n√∫mero almacenado
- Para formato de dimensiones (`LxA`), el sistema calcula y almacena el √°rea total
- Todas las medidas se muestran con unidades `m¬≤` en la interfaz

**üîß Detalles T√©cnicos**

El sistema de parseo sigue esta prioridad:
1. **N√∫mero Directo**: Si la entrada es un n√∫mero v√°lido, se usa directamente
2. **C√°lculo de Dimensiones**: Si el formato contiene 'x', calcula ancho √ó alto
3. **Extracci√≥n de N√∫mero**: Extrae el primer n√∫mero v√°lido de formatos mixtos
4. **Fallback**: Por defecto, retorna 0.0 para entradas inv√°lidas

**üìä Flujo Visual de Procesamiento**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                Ejemplos de Entrada del Usuario              ‚îÇ
‚îÇ  ‚Ä¢ "40" (n√∫mero simple)                                   ‚îÇ
‚îÇ  ‚Ä¢ "25x15" (dimensiones)                                  ‚îÇ
‚îÇ  ‚Ä¢ "30m x 20m" (con unidades)                             ‚îÇ
‚îÇ  ‚Ä¢ "50.5" (decimal)                                       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                M√©todo _parseSize()                         ‚îÇ
‚îÇ                                                           ‚îÇ
‚îÇ  Paso 1: Intentar parseo directo                          ‚îÇ
‚îÇ          ‚Üì (si falla)                                     ‚îÇ
‚îÇ  Paso 2: Buscar formato 'x' ‚Üí Calcular √°rea               ‚îÇ
‚îÇ          ‚Üì (si falla)                                     ‚îÇ
‚îÇ  Paso 3: Extraer primer n√∫mero con regex                  ‚îÇ
‚îÇ          ‚Üì (si falla)                                     ‚îÇ
‚îÇ  Paso 4: Retornar 0.0 (fallback)                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                Almacenamiento en BD                        ‚îÇ
‚îÇ            Valor double (ej: 375.0)                        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚îÇ
                      ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                   Visualizaci√≥n en UI                      ‚îÇ
‚îÇ               "375.0 m¬≤" (formateado)                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

Esto asegura m√°xima flexibilidad y consistencia de datos en tu sistema de gesti√≥n de piscinas.

#### **Gesti√≥n de Equipo**
1. **Agregar Usuarios Asociados**
   - Ve a la secci√≥n de Usuarios
   - Haz clic en "Agregar Asociado"
   - Crea cuentas para trabajadores de campo
   - Asigna permisos apropiados

2. **Asignaci√≥n de Rutas**
   - Crea rutas de mantenimiento
   - Asigna trabajadores a rutas
   - Monitorea el progreso de rutas
   - Actualiza el estado de la ruta

#### **Reportes y Anal√≠tica**
- **Reportes de Mantenimiento**: Genera reportes de servicio
- **Anal√≠tica de Desempe√±o**: Visualiza desempe√±o de equipo y rutas
- **Reportes de Clientes**: Analiza satisfacci√≥n de clientes
- **Reportes Financieros**: Rastrea facturaci√≥n e ingresos

### Mejores Pr√°cticas
- Comunicaci√≥n regular con clientes
- Programaci√≥n proactiva de mantenimientos
- Capacitaci√≥n y supervisi√≥n del equipo
- Control de calidad y est√°ndares de servicio

#### **Proceso de Invitaci√≥n y Onboarding de Trabajadores**

Esta secci√≥n detalla el proceso paso a paso para invitar a un usuario registrado a ser trabajador de tu empresa.

**A. Administrador: Enviando la Invitaci√≥n**

1.  **Navega a Invitar Trabajador**: Desde tu Panel de Administrador, ve a "Gestionar Trabajadores" y selecciona "Invitar Trabajador" o "Agregar Trabajador".
2.  **Ingresa el Correo**: En el formulario, ingresa el correo del usuario a invitar.
    *   **Requisito 1**: El usuario debe tener cuenta registrada en Shinning Pools.
    *   **Requisito 2**: El usuario debe tener rol `Cliente`.
    *   **Requisito 3**: El usuario no debe tener piscinas registradas.
3.  **Mensaje Personal (Opcional)**: Puedes agregar un mensaje breve que ver√° el usuario.
4.  **Enviar Invitaci√≥n**: Haz clic en "Enviar". El sistema crear√° una invitaci√≥n pendiente y el usuario ser√° notificado al iniciar sesi√≥n.

**B. Usuario Invitado: Respondiendo a la Invitaci√≥n**

1.  **Inicio de Sesi√≥n y Notificaci√≥n**: Al iniciar sesi√≥n, el usuario ver√° una notificaci√≥n de invitaci√≥n pendiente en su Panel de Cliente.
2.  **Revisar Invitaci√≥n**: Al hacer clic, ver√° la empresa que lo invita y el mensaje del admin.
3.  **Aceptar o Rechazar**: Dos opciones:
    *   **Aceptar**: Cambia el rol a `Trabajador` y asocia al usuario a la empresa. Al siguiente inicio de sesi√≥n ver√° el Panel de Trabajador.
    *   **Rechazar**: La invitaci√≥n se marca como `rechazada` y no hay cambios en la cuenta.

Este proceso asegura que el usuario d√© consentimiento expl√≠cito para unirse como trabajador, brindando una experiencia segura y transparente.

### Formulario de Mantenimiento (Agregar/Actualizar Registro)

El nuevo formulario de mantenimiento est√° dise√±ado para velocidad, claridad y precisi√≥n. Se divide en:

1. **Mantenimiento Est√°ndar** (siempre visible)
   - **Mantenimiento Qu√≠mico Est√°ndar**: Ingresa r√°pidamente cloro l√≠quido, tabletas, alguicida, √°cido muri√°tico y sal (si aplica).
   - **Mantenimiento F√≠sico Est√°ndar**: Marca cepillado de paredes, limpieza de filtro y otras acciones rutinarias.
2. **Mantenimiento Detallado** (colapsable)
   - **Mantenimiento Qu√≠mico**: Todas las opciones qu√≠micas, agrupadas como:
     - Aditivos (checkboxes): ej. alguicidas, clarificadores, quelantes, etc.
     - Qu√≠micos Medidos (cantidad): ej. hipoclorito de calcio, carbonato de sodio, etc.
   - **Mantenimiento F√≠sico**: Todas las acciones f√≠sicas, con checkboxes y campos de costo seg√∫n corresponda.
3. **M√©tricas de Calidad de Agua**: Ingresa pH, cloro, alcalinidad, calcio, etc.
4. **Notas y Pr√≥ximo Mantenimiento**: Agrega notas y programa la pr√≥xima visita.

**Caracter√≠sticas de la Nueva UI/UX:**
- Fondo transparente para integraci√≥n visual con la app
- Tarjetas con √≠conos y acentos de color
- Separaci√≥n y agrupaci√≥n clara para entrada r√°pida y sin errores
- Secciones avanzadas colapsables para un flujo limpio

**C√≥mo Usar:**
1. Completa las tarjetas de Mantenimiento Qu√≠mico y F√≠sico Est√°ndar al inicio.
2. Expande las tarjetas de Mantenimiento Qu√≠mico o F√≠sico para acciones avanzadas/adicionales.
3. Ingresa m√©tricas de calidad de agua y notas.
4. Guarda el registro.

#### **Listas de Mantenimientos Recientes**
- **Administradores de Empresa**: En la pesta√±a de Piscinas, despl√°zate hacia abajo hasta "Mantenimiento Reciente (√öltimos 20)" para ver y filtrar todos los mantenimientos de la empresa. Usa los filtros de piscina, estado y rango de fechas. Si ves un error sobre un √≠ndice faltante, consulta la secci√≥n de soluci√≥n de problemas.

- **Trabajadores**: En la pesta√±a de Reportes, despl√°zate hasta el final para encontrar "Mantenimiento Reciente (√öltimos 20)". Esta lista muestra tus 20 mantenimientos m√°s recientes, con filtros de piscina, estado y rango de fechas. Si ves un error sobre un √≠ndice faltante, consulta la secci√≥n de soluci√≥n de problemas.

### Soluci√≥n de Problemas
#### Errores de √çndice de Firestore
Si ves un mensaje de error como "La consulta requiere un √≠ndice" o "[cloud_firestore/failed-precondition]", significa que Firestore necesita un √≠ndice compuesto para tus filtros. Para solucionarlo:
1. Copia el enlace proporcionado en el mensaje de error y √°brelo en tu navegador.
2. Haz clic en "Crear" en la consola de Firebase.
3. Espera unos minutos a que se construya el √≠ndice y vuelve a cargar la app.
Si el enlace est√° roto, consulta la gu√≠a de administrador o contacta soporte para los pasos manuales de creaci√≥n de √≠ndices.

---

## Manual de Usuario Cliente

### Descripci√≥n General
Los clientes monitorean sus piscinas, ven reportes de mantenimiento y gestionan su informaci√≥n de cuenta.

### Funciones del Panel

#### **Resumen de Piscinas**
- **Mis Piscinas**: Visualiza todas tus piscinas registradas
- **Estado de Piscina**: Revisa condiciones actuales
- **Historial de Mantenimiento**: Consulta servicios pasados
- **Pr√≥ximos Servicios**: Ve mantenimientos programados

#### **Registro de Empresa** (Nuevos Clientes)
1. **Registrar tu Empresa**
   - Haz clic en "Registrar Empresa" en el panel
   - Completa la informaci√≥n:
     - Nombre de la empresa
     - Direcci√≥n
     - Tel√©fono
     - Descripci√≥n
   - Env√≠a para aprobaci√≥n
   - Espera aprobaci√≥n del usuario root

2. **Estado de Registro**
   - "Pendiente de Aprobaci√≥n": Tu solicitud est√° en revisi√≥n
   - "Aprobado": Acceso a funciones de admin
   - "Rechazado": Contacta soporte

#### **Recibiendo Invitaci√≥n de Trabajador**
Si un admin te invita a ser trabajador, ver√°s una notificaci√≥n en tu panel.
1. **Revisar**: Haz clic para ver detalles de la invitaci√≥n.
2. **Responder**: Puedes **Aceptar** o **Rechazar**.
   - **Aceptar**: Cambia tu rol a "Trabajador" y accedes a rutas y tareas.
   - **Rechazar**: No hay cambios en tu cuenta.

#### **Gesti√≥n de Piscinas**
1. **Agregar Nueva Piscina**
   - Ve a la secci√≥n de Piscinas
   - Haz clic en "Agregar Piscina"
   - Ingresa detalles:
     - Nombre/identificador
     - Tama√±o y tipo
     - Ubicaci√≥n
     - Requerimientos especiales
   - Env√≠a para procesamiento

2. **Monitoreo de Piscinas**
   - Consulta historial de mantenimiento
   - Revisa reportes de calidad de agua
   - Monitorea estado de equipos
   - Solicita servicios adicionales

#### **Reportes y Comunicaci√≥n**
- **Reportes de Servicio**: Consulta reportes detallados
- **Facturaci√≥n**: Revisa facturas de servicio
- **Comunicaci√≥n**: Contacta a tu proveedor
- **Feedback**: Califica y comenta el servicio

#### **Gesti√≥n de Perfil**
- **Informaci√≥n Personal**: Actualiza datos de contacto
- **Preferencias**: Configura notificaciones
- **Seguridad**: Cambia contrase√±a y ajustes de seguridad

### Mejores Pr√°cticas
- Mant√©n actualizada la informaci√≥n de piscinas
- Revisa reportes de mantenimiento regularmente
- Comunica requerimientos especiales a tiempo
- Da feedback para mejorar el servicio

---

## Manual de Usuario Asociado

### Descripci√≥n General
Los usuarios asociados (trabajadores de campo) ejecutan rutas de mantenimiento, registran actividades y actualizan el estado de piscinas.

### Funciones del Panel

#### **Gesti√≥n de Rutas**
1. **Ver Rutas Asignadas**
   - Consulta rutas diarias
   - Ve detalles y piscinas de la ruta
   - Accede a informaci√≥n de clientes
   - Revisa instrucciones especiales

2. **Ejecuci√≥n de Ruta**
   - Inicia la ruta al comenzar trabajo
   - Actualiza progreso al completar piscinas
   - Registra problemas o retrasos
   - Marca la ruta como completada

#### **Mantenimiento de Piscinas**
1. **Registro de Servicio**
   - Selecciona piscina de la ruta
   - Registra actividades:
     - Niveles qu√≠micos
     - Trabajo en equipos
     - Chequeos de calidad de agua
     - Observaciones generales
   - Agrega fotos si es necesario
   - Env√≠a reporte de servicio

2. **Reporte de Problemas**
   - Reporta problemas de equipos
   - Nota problemas de calidad de agua
   - Se√±ala inquietudes del cliente
   - Solicita acciones de seguimiento

#### **Comunicaci√≥n**
- **Actualizaciones al Cliente**: Informa finalizaci√≥n de servicio
- **Comunicaci√≥n de Equipo**: Actualiza supervisores sobre progreso
- **Contactos de Emergencia**: Accede a contactos de emergencia
- **Notas de Servicio**: Deja notas detalladas para el equipo

#### **Funciones M√≥viles**
- **Modo Offline**: Trabaja sin conexi√≥n
- **Captura de Fotos**: Documenta condiciones de piscina
- **GPS**: Registra ubicaciones de servicio
- **Control de Tiempo**: Monitorea duraci√≥n del servicio

### Mejores Pr√°cticas
- Sigue protocolos de seguridad
- Completa todas las tareas asignadas
- Documenta el trabajo detalladamente
- Comunica problemas de inmediato
- Mant√©n una apariencia profesional

### Formulario de Mantenimiento (Agregar/Actualizar Registro)

Los trabajadores de campo usan el mismo formulario moderno que los administradores. El flujo es:

1. **Mantenimiento Est√°ndar**: Completa las tarjetas siempre visibles para acciones rutinarias qu√≠micas y f√≠sicas.
2. **Mantenimiento Detallado**: Expande las tarjetas qu√≠micas/f√≠sicas para acciones avanzadas seg√∫n sea necesario.
3. **Calidad de Agua y Notas**: Ingresa resultados y observaciones.
4. **Enviar**: Guarda el registro para seguimiento y reporte.

El nuevo dise√±o asegura un reporte de mantenimiento r√°pido, preciso y profesional en campo.

---

## Soluci√≥n de Problemas

### Problemas Comunes

#### **Problemas de Inicio de Sesi√≥n**
- **Olvid√© mi Contrase√±a**: Usa la funci√≥n de recuperaci√≥n
- **Cuenta Bloqueada**: Contacta a tu administrador
- **Correo No Verificado**: Revisa spam para el correo de verificaci√≥n

#### **Problemas de Registro de Empresa**
- **Registro Pendiente**: Espera aprobaci√≥n (24-48h)
- **Registro Rechazado**: Contacta soporte
- **No Puedes Registrar**: Usa un correo v√°lido

#### **Problemas de Gesti√≥n de Piscinas**
- **Piscina No Aparece**: Verifica si est√° asignada a tu cuenta
- **No Puedes Editar Piscina**: Verifica permisos
- **Historial de Mantenimiento Falta**: Contacta a tu proveedor
- **Foto de Piscina No Carga en Edici√≥n**:
  - **Problema**: Error "No se detect√≥ el formato de imagen" al editar piscinas con fotos
  - **Causa**: Corrupci√≥n de datos de imagen en modo desarrollo
  - **Soluci√≥n**: Corregido en la √∫ltima versi√≥n - las fotos ahora cargan correctamente
  - **Alternativa**: Si persiste, sube una nueva foto (el sistema preserva la calidad)
- **Problemas al Subir Foto de Cliente**:
  - **Archivo Muy Grande**: Las fotos se comprimen autom√°ticamente
  - **Timeout de Subida**: En modo desarrollo, las fotos pueden guardarse como data URLs
  - **Errores CORS**: En desarrollo se usa almacenamiento alternativo
  - **Formatos Soportados**: JPG, PNG hasta tama√±os razonables

#### **Problemas T√©cnicos**
- **P√°gina No Carga**: Borra cach√© y cookies
- **Rendimiento Lento**: Verifica tu conexi√≥n
- **Problemas M√≥viles**: Usa la versi√≥n de escritorio para funcionalidad completa

### Obtener Ayuda

#### **Canales de Soporte**
- **Ayuda en la App**: Usa la secci√≥n de ayuda en tu panel
- **Soporte por Correo**: support@shinningpools.com
- **Soporte Telef√≥nico**: Llama en horario laboral
- **Documentaci√≥n**: Consulta este manual y recursos online

#### **Contactos de Emergencia**
- **Problemas T√©cnicos**: Equipo de soporte TI
- **Emergencias de Servicio**: Proveedor asignado
- **Preguntas de Facturaci√≥n**: Departamento de cuentas

### Requisitos del Sistema

#### **Navegador Web**
- Chrome 90+ (Recomendado)
- Firefox 88+
- Safari 14+
- Edge 90+

#### **Dispositivos M√≥viles**
- iOS 13+ (Safari)
- Android 8+ (Chrome)
- Dise√±o responsivo para todos los tama√±os

#### **Conexi√≥n a Internet**
- M√≠nimo 1 Mbps de descarga
- Conexi√≥n estable para funciones en tiempo real
- Modo offline disponible para trabajadores de campo

---

## Referencia R√°pida

### Atajos de Teclado
- **Ctrl + S**: Guardar cambios
- **Ctrl + F**: Buscar en la p√°gina
- **Ctrl + R**: Refrescar p√°gina
- **Esc**: Cerrar di√°logos

### Indicadores de Estado
- üü¢ **Activo**: Operaci√≥n normal
- üü° **Pendiente**: Esperando acci√≥n
- üî¥ **Suspendido**: Temporalmente deshabilitado
- ‚ö´ **Inactivo**: No en uso

### Acciones Comunes
- **Editar**: Haz clic en el √≠cono de l√°piz o men√∫ de tres puntos
- **Eliminar**: Usa el √≠cono de papelera con confirmaci√≥n
- **Ver Detalles**: Haz clic en el nombre del elemento
- **Exportar**: Usa el √≠cono de descarga para reportes

---

*√öltima Actualizaci√≥n: Enero 2025*
*Versi√≥n: 1.6.4 - Agregadas Validaciones de Calidad de C√≥digo y Actualizaciones de Documentaci√≥n*

> **üìù Actualizaciones Recientes**: 
> - **Validaci√≥n de Calidad de C√≥digo (Enero 2025)**: Validaci√≥n exitosa de c√≥digo limpio con 0 problemas de an√°lisis est√°tico usando `flutter analyze`
> - **Mantenimiento de Documentaci√≥n**: Proceso mejorado para mantener todos los archivos de documentaci√≥n sincronizados y actualizados
> - **Confirmaci√≥n del Estado del Proyecto**: Verificaci√≥n del estado listo para producci√≥n con sistema completo de gesti√≥n de rutas
> - **Validaci√≥n de Rendimiento**: Confirmaci√≥n de 78 pruebas exitosas, 0 fallos (100% de tasa de aprobaci√≥n) y 0 errores de compilaci√≥n

## Caracter√≠sticas del Mapa y Selecci√≥n de Piscinas (Actualizaci√≥n 2025)

### Marcador de Ubicaci√≥n Personalizado del Usuario
- El mapa ahora muestra tu ubicaci√≥n actual con un √≠cono personalizado (user_marker.png).
- Si no ves tu marcador de ubicaci√≥n, aseg√∫rate de que los permisos de ubicaci√≥n est√©n habilitados y que la imagen exista en assets/img/user_marker.png.

### Marcadores de Piscinas
- Todas las piscinas se muestran como marcadores azules en el mapa.
- Cada marcador muestra la direcci√≥n de la piscina. Si falta la direcci√≥n, mostrar√° 'Sin direcci√≥n'.

### Interfaz de Selecci√≥n de Piscinas
- La secci√≥n 'Piscina Seleccionada' ahora aparece inmediatamente despu√©s del cuadro de b√∫squeda para un flujo de trabajo m√°s f√°cil.
- Puedes buscar piscinas por nombre, direcci√≥n o cliente, o seleccionar desde el mapa.

### Soluci√≥n de Problemas
- Si el marcador de usuario no aparece, verifica que la imagen exista y est√© listada en pubspec.yaml.
- Si un marcador de piscina no muestra una direcci√≥n, verifica el campo de direcci√≥n en el documento Firestore de la piscina.

## Men√∫ de Ayuda (Caj√≥n Lateral)

Un nuevo men√∫ de ayuda est√° disponible desde el panel principal para todos los roles de usuario (trabajador, administrador de empresa, cliente, root). √Åbrelo usando el √≠cono de men√∫ en la esquina superior izquierda. El men√∫ de ayuda proporciona:

- **Acerca de**: Versi√≥n de la aplicaci√≥n, √∫ltima actualizaci√≥n, nombre de la empresa (Lemax Engineering LLC) e informaci√≥n de contacto (+1 561 506 9714).
- **Verificar Actualizaciones**: Verificar si hay una nueva versi√≥n disponible.
- **Bienvenida**: Mensaje de bienvenida y descripci√≥n general de la aplicaci√≥n.
- **Enlaces del Manual de Usuario**: Enlaces directos al manual de usuario (PDF), inicio r√°pido y gu√≠as de soluci√≥n de problemas.
- **Contacto y Soporte**: Llamar o enviar correo electr√≥nico al soporte directamente desde la aplicaci√≥n.

## Mantenimiento de Piscinas: Actualizaci√≥n de la Interfaz de Selecci√≥n de Piscinas

Al seleccionar una piscina para mantenimiento, la tarjeta 'Piscina Seleccionada' ahora aparece **arriba** de los resultados de b√∫squeda, facilitando la confirmaci√≥n de tu selecci√≥n antes de proceder. Anteriormente, se mostraba debajo de los resultados de b√∫squeda.

# Problemas Conocidos

## Error de Permiso Firestore para Administradores de Empresa (Junio 2025)
- **Problema:** Los administradores de empresa pueden recibir un error 'permission-denied' al acceder a los mantenimientos de piscinas.
- **Causa:** Esto generalmente se debe a campos `companyId` faltantes o que no coinciden en los registros de mantenimiento, o reglas de seguridad de Firestore que no coinciden con la empresa del usuario.
- **Soluci√≥n Temporal:** Aseg√∫rate de que todos los documentos `pool_maintenances` tengan el campo `companyId` correcto que coincida con la empresa del administrador. Si el problema persiste, contacta al soporte o tu administrador del sistema.
- **Estado:** Se est√° esperando una correcci√≥n permanente. Este problema est√° siendo seguido en la lista de tareas del proyecto.

## Estado de Calidad de C√≥digo y Rendimiento (Enero 2025)
- **An√°lisis Est√°tico:** ‚úÖ C√≥digo limpio con 0 problemas detectados
- **Cobertura de Pruebas:** ‚úÖ 78 pruebas exitosas, 0 fallos (100% de tasa de aprobaci√≥n)
- **Compilaci√≥n:** ‚úÖ 0 errores, 154 advertencias (no bloqueantes)
- **Rendimiento:** ‚úÖ Estable y responsivo en todas las plataformas
- **Multiplataforma:** ‚úÖ Soporte completo para Web, Android, iOS, Desktop

**Recordatorio:** Siempre verifica las √∫ltimas actualizaciones de la aplicaci√≥n y documentaci√≥n para asegurarte de tener la informaci√≥n y funciones m√°s actuales.
